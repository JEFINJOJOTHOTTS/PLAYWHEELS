<%- include('./userParsels/head.ejs') %>
    <%- include('./userParsels/header.ejs') %>
        <%- include('./userParsels/logHead.ejs') %>
            <style>
                .checkBox {
                    height: 20px;
                }
            </style>

            <body>

                <main class="main">
                    <section class="pt-50 pb-150">
                        <div class="p-5">
                            <div class="row">
                                <div class="col-lg-12 m-auto">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="dashboard-menu">
                                                <ul class="nav flex-column" role="tablist">
                                                    <li style="border: 1px;" class="mb-2">
                                                        <div class=" d-flex" style="background-color: #96a1a1;">
                                                            <div>
                                                                <!-- <img class="m-2" src="	https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/profile-pic-male_4811a1.svg"> -->
                                                            </div>
                                                            <div style="margin: 1em;">
                                                                <h4 class="text-white">Hello,<br></h4>

                                                                <h4 style="display: none;" class="text-white">Hello,<br>
                                                                    <%=user%>!
                                                                </h4>
                                                            </div>
                                                        </div>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link " id="orders-tab" data-bs-toggle="tab"
                                                            href="#orders" role="tab" aria-controls="orders"
                                                            aria-selected="false"><i
                                                                class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link" id="address-tab" data-bs-toggle="tab"
                                                            href="#address" role="tab" aria-controls="address"
                                                            aria-selected="true" onclick="viewAddress()"><i
                                                                class="fi-rs-marker mr-10"></i>Manage Address</a>
                                                    </li>
                                                    <!-- <li class="nav-item">
                                                        <a class="nav-link" id="myWallet-tab" data-bs-toggle="tab" href="#myWallet" role="tab" aria-controls="myWallet" aria-selected="true" onclick="viewWallet()" ><i class="fi-rs-marker mr-10"></i>My Wallet</a>
                                                    </li> -->
                                                    <li class="nav-item">
                                                        <a class="nav-link" id="myWallet-tab" data-bs-toggle="tab"
                                                            href="#myWallet" role="tab" aria-controls="myWallet"
                                                            aria-selected="true" onclick="viewWallet()"><i
                                                                class="fi-rs-marker mr-10"></i>My Wallet</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab"
                                                            href="#account-detail" role="tab"
                                                            aria-controls="account-detail" aria-selected="true"><i
                                                                class="fi-rs-user mr-10"></i>Account
                                                            settings</a>
                                                    </li>
                                                    <li class="nav-item">
                                                        <a class="nav-link" href="/logout"><i
                                                                class="fi-rs-sign-out mr-10"></i>Logout</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="tab-content dashboard-content">
                                                <!-- My-wallet -->

                                                <div class="tab-pane fade" id="myWallet" role="tabpanel"
                                                    aria-labelledby="myWallet-tab">
                                                    <div class="card">
                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h2 class="mb-20"
                                                                    style="font-family: 'Lato'; color: #181818;font-weight: 600;line-height: 1.2 ;">
                                                                    My wallet</h2>
                                                                <h4 style="font-family: 'Lato';color: #595959;font-weight: 600;line-height: 1.2 ;"
                                                                    id="walletTotal">
                                                                    Available Balance :â‚¹ <% if(wallet){%>
                                                                        <%= wallet.Wallet%>
                                                                            <%}else{%> 0 <%}%>
                                                                </h4>
                                                            </div>

                                                            <div class="container">
                                                                <div class="col-12">
                                                                    <h3 class="my-3"
                                                                        style="font-family: 'Lato'; color: #181818;font-weight: 600;line-height: 1.2 ;">
                                                                        Transactions</h3>
                                                                    <div class="" id="walletDetails">


                                                                    </div>
                                                                </div>
                                                                <div class="pagination-area mt-15 mb-sm-5 mb-lg-0">
                                                                    <nav aria-label="Page navigation example">
                                                                        <ul class="pagination justify-content-start"
                                                                            id="walletPaginationId">

                                                                        </ul>
                                                                    </nav>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- MY-wallet-End -->

                                                <div class="tab-pane fade" id="orders" role="tabpanel"
                                                    aria-labelledby="orders-tab">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h5 class="mb-0">Your Orders</h5>
                                                        </div>
                                                        <section class="marginTop" class=" mb-50" class="content-main">
                                                            <div class="content-header">
                                                                <div>
                                                                    <h2 class="content-title card-title">Order List
                                                                    </h2>
                                                                    <p></p>
                                                                </div>
                                                                <div style="display: none;">
                                                                    <input type="text" placeholder="Search order ID"
                                                                        class="form-control bg-white">
                                                                </div>
                                                            </div>
                                                            <div class="card mb-4" >
                                                                <header class="card-header"  style="display: none;">
                                                                    <div class="row gx-3">
                                                                        <div class="col-lg-4 col-md-6 me-auto">
                                                                            <input type="text" placeholder="Search..."
                                                                                class="form-control">
                                                                        </div>
                                                                        <div class="col-lg-2 col-6 col-md-3">
                                                                            <select class="form-select">
                                                                                <option>Status</option>
                                                                                <option>Active</option>
                                                                                <option>Disabled</option>
                                                                                <option>Show all</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="col-lg-2 col-6 col-md-3">
                                                                            <select class="form-select">
                                                                                <option>Show 20</option>
                                                                                <option>Show 30</option>
                                                                                <option>Show 40</option>
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </header> <!-- card-header end// -->
                                                                <div class="card-body">
                                                                    <div class="table-responsive">
                                                                        <table class="table table-hover">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>#ID</th>
                                                                                    <th scope="col">Product Name</th>
                                                                                    <th scope="col">Color</th>
                                                                                    <th scope="col">Quantity</th>
                                                                                    <th scope="col">Total</th>
                                                                                    <th scope="col">Discounted<br> Total
                                                                                    </th>
                                                                                    <th scope="col">Status</th>
                                                                                    <th scope="col">Payment<br> Method
                                                                                    </th>
                                                                                    <th scope="col">Date</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <% if(orderData){%>
                                                                                    <% orderData.forEach(function(order)
                                                                                        { %>
                                                                                        <tr>
                                                                                            <td>
                                                                                                <%=order.orderId%>
                                                                                            </td>
                                                                                        </tr>
                                                                                        <% order.products.forEach(function(product)
                                                                                            { %>

                                                                                            <tr>
                                                                                                <td>

                                                                                                </td>
                                                                                                <td><b>
                                                                                                        <%=product.Name%>
                                                                                                    </b></td>
                                                                                                <td>
                                                                                                    <%=product.Color%>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <%=product.Quantity%>
                                                                                                </td>
                                                                                                <td><s>
                                                                                                        <%=product.Total%>
                                                                                                    </s></td>

                                                                                                <td><strong>
                                                                                                        <%=product.DiscountedTotal%>
                                                                                                    </strong></td>
                                                                                                <td>
                                                                                                    <% switch
                                                                                                        (order.delivery_status)
                                                                                                        { case 'Pending'
                                                                                                        : %>
                                                                                                        <span
                                                                                                            class="badge rounded-pill alert-warning">Pending</span>

                                                                                                        <% break;
                                                                                                            case 'Return'
                                                                                                            : %> <span
                                                                                                                class="badge rounded-pill alert-danger">Return</span>
                                                                                                            <% break;
                                                                                                                case 'Cancelled'
                                                                                                                : %>
                                                                                                                <span
                                                                                                                    class="badge rounded-pill alert-danger">Canceled</span>
                                                                                                                <% break;
                                                                                                                    case 'Delivered'
                                                                                                                    : %>
                                                                                                                    <span
                                                                                                                        class="badge rounded-pill alert-success">Delivered</span>
                                                                                                                    <% break;
                                                                                                                        default:
                                                                                                                        %>
                                                                                                                        <p>Error
                                                                                                                        </p>
                                                                                                                        <% }
                                                                                                                            %>
                                                                                                </td>

                                                                                                <td>
                                                                                                    <%=order.payment_option%>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <%=order.orderDate%>
                                                                                                </td>
                                                                                                <!-- dropdown //end -->

                                                                                            </tr>
                                                                                            <tr>
                                                                                                <%})%>
                                                                                            <tr>
                                                                                                <td><strong
                                                                                                        style="font-weight: bolder;">
                                                                                                        TOTAL
                                                                                                    </strong></td>
                                                                                                <td></td>
                                                                                                <td></td>
                                                                                                <td></td>
                                                                                                <td> â‚¹<s>
                                                                                                        <%=order.amount.TotalAmount%>
                                                                                                    </s></td>
                                                                                                <td
                                                                                                    style="font-weight: bolder;">
                                                                                                    <strong
                                                                                                        style="font-weight: bolder;">
                                                                                                        â‚¹
                                                                                                        <%=order.amount.FinalAmount%>
                                                                                                    </strong>
                                                                                                </td>
                                                                                                <td></td>
                                                                                                <td>

                                                                                                    <a href="/order/<%=orders._id %>/<%=order.orderId %>"
                                                                                                        style="width: auto;"
                                                                                                        class="btn btn-md rounded font-sm btn-warning">View
                                                                                                        Order</a>
                                                                                                </td>
                                                                                                <td>

                                                                                                </td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td></td>
                                                                                            </tr>
                                                                                            <%})%>
                                                                                                <%}else{%>
                                                                                                    <h6>Till No Orders
                                                                                                    </h6>
                                                                                                    <%}%>

                                                                            </tbody>
                                                                        </table>
                                                                    </div> <!-- table-responsive //end -->
                                                                </div> <!-- card-body end// -->
                                                            </div> <!-- card end// -->
                                                            <div class="pagination-area mt-15 mb-50"
                                                                style="display: none;">
                                                                <nav aria-label="Page navigation example">
                                                                    <ul class="pagination justify-content-start">
                                                                        <li class="page-item active"><a
                                                                                class="page-link" href="#">01</a></li>
                                                                        <li class="page-item"><a class="page-link"
                                                                                href="#">02</a></li>
                                                                        <li class="page-item"><a class="page-link"
                                                                                href="#">03</a></li>
                                                                        <li class="page-item"><a class="page-link dot"
                                                                                href="#">...</a></li>
                                                                        <li class="page-item"><a class="page-link"
                                                                                href="#">16</a></li>
                                                                        <li class="page-item"><a class="page-link"
                                                                                href="#"><i
                                                                                    class="material-icons md-chevron_right"></i></a>
                                                                        </li>
                                                                    </ul>
                                                                </nav>
                                                            </div>
                                                        </section> <!-- content-main end// -->
                                                    </div>
                                                </div>


                                                <div class="tab-pane fade " id="address" role="tabpanel"
                                                    aria-labelledby="address-tab">
                                                    <div class="text-center">

                                                        <div class="mb-25">
                                                            <h4>Billing Details</h4>
                                                        </div>

                                                        <% if(DeliveryAddress){%>
                                                            <% DeliveryAddress.forEach(function(data, index) { %>
                                                                <div class="card col-md-10 m-auto">
                                                                    <div class="card-body">
                                                                        <h5 class="card-title">
                                                                            <%= data.Name %>
                                                                        </h5>
                                                                        <h6 class="card-subtitle mb-2 text-muted">
                                                                            <%= data.AddressType %>
                                                                        </h6>
                                                                        <p class="card-text"><strong>Address :
                                                                            </strong>
                                                                            <%= data.Address %>
                                                                        </p>
                                                                        <p class="card-text"><strong>Landmark :
                                                                            </strong>
                                                                            <%= data.Landmark %>
                                                                        </p>
                                                                        <p class="card-text"><strong>Pin Code :
                                                                            </strong>
                                                                            <%= data.Pin %>
                                                                        </p>
                                                                        <p class="card-text"><strong>Phone :
                                                                            </strong>
                                                                            <%= data.Phone %>
                                                                        </p>
                                                                        <p class="card-text"><strong>Email :
                                                                            </strong>
                                                                            <%= data.Email %>
                                                                        </p>


                                                                        <!-- Edit button that opens a modal -->
                                                                        <button type="button" class="btn btn-primary"
                                                                            data-toggle="modal"
                                                                            data-target="#editModal<%= index %>">
                                                                            Edit
                                                                        </button>


                                                                    </div>
                                                                </div>

                                                                <% }) %>
                                                                    <%}%>
                                                    </div>
                                                    <button type="button" class="btn btn-primary" data-toggle="modal"
                                                        data-target="#addModal">
                                                        ADD NEW ADDRESS
                                                    </button>
                                                </div>

                                                <div class="container">
                                                    <div class="col-12">
                                                        <div class="" id="address1">


                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- account-settings -->
                                                <div class="tab-pane fade active show" id="account-detail"
                                                    role="tabpanel" aria-labelledby="account-detail-tab">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            <h5>Change Password</h5>
                                                        </div>
                                                        <div class="card-body">
                                                            <form id="passwordForm">
                                                                <div class="row">

                                                                    <div class="form-group col-md-12">
                                                                        <label>Current Password <span
                                                                                class="required">*</span></label>
                                                                        <input required="" class="form-control square"
                                                                            name="password" type="password"
                                                                            id="oldpassword">
                                                                        <span class="text-danger"
                                                                            id="oldpasswordError"></span>
                                                                    </div>
                                                                    <div class="form-group row  ">
                                                                        <div class="col-md-12">
                                                                            <label>New Password <span
                                                                                    class="required">*</span></label>
                                                                            <input type="password" id="password"
                                                                                name="Password"
                                                                                class="form__input pt-2 mt-1 mb-1"
                                                                                placeholder="Password"
                                                                                onkeyup="passwordValidation()"
                                                                                pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                                                                title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                                                                                required />
                                                                            <div
                                                                                style="display: flex; align-items: center;">
                                                                                <span style="white-space: nowrap;">Show
                                                                                    Password</span>
                                                                                <input type="checkbox"
                                                                                    style="height: 20px; width: 30%;"
                                                                                    onclick="showPassword()">
                                                                            </div>

                                                                            <div id="message">
                                                                                <span id="messagePasword"
                                                                                    class="invalid">
                                                                                </span>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group col-md-12">
                                                                        <label>Confirm Password <span
                                                                                class="required">*</span></label>
                                                                        <input type="password" name="ConfirmPassword"
                                                                            id="confirmPassword"
                                                                            onkeyup="confirmPasswordValidation()"
                                                                            class="form__input pt-2 mt-1 mb-1"
                                                                            placeholder="Re-enter Password" required>
                                                                        <div
                                                                            style="display: flex; align-items: center;">
                                                                            <span style="white-space: nowrap;">Show
                                                                                Conform Password</span>
                                                                            <input type="checkbox"
                                                                                style="height: 20px; width: 10%;"
                                                                                onclick="showConfirmPassword()">
                                                                        </div>
                                                                        <div
                                                                            class="row ml-4 justify-content-center text-center">
                                                                            <p class="text-center">
                                                                                <span class="text-center"
                                                                                    id='confirmMessage'></span>
                                                                            </p>
                                                                        </div>
                                                                        <div class="col-md-12">
                                                                            <button class="btn btn-fill-out submit"
                                                                                id="passwordSubmit"
                                                                                onclick="changePassWord(event)">Save</button>
                                                                        </div>
                                                                    </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- My-wallet -->

                                                <div class="tab-pane fade" id="myWallet" role="tabpanel"
                                                    aria-labelledby="myWallet-tab">
                                                    <div class="card">
                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h2 class="mb-20"
                                                                    style="font-family: 'Lato'; color: #181818;font-weight: 600;line-height: 1.2 ;">
                                                                    My wallet</h2>
                                                                <h4 style="font-family: 'Lato';color: #595959;font-weight: 600;line-height: 1.2 ;"
                                                                    id="walletTotal">
                                                                    Available Balance :â‚¹0.00</h4>
                                                            </div>

                                                            <div class="container">
                                                                <div class="col-12">
                                                                    <h3 class="my-3"
                                                                        style="font-family: 'Lato'; color: #181818;font-weight: 600;line-height: 1.2 ;">
                                                                        Transactions</h3>
                                                                    <div class="" id="walletDetails">


                                                                    </div>
                                                                </div>
                                                                <div class="pagination-area mt-15 mb-sm-5 mb-lg-0">
                                                                    <nav aria-label="Page navigation example">
                                                                        <ul class="pagination justify-content-start"
                                                                            id="walletPaginationId">

                                                                        </ul>
                                                                    </nav>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- MY-wallet-End -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>


                <!-- modal-form-start -->
                <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
                    aria-labelledby="myLargeModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="container mt-5">
                                <div class="text-center m-5">
                                    <h3>Order Details</h3>
                                </div>
                                <div class="table-responsive">
                                    <table class="table shopping-summery text-center clean" id="Mytable">
                                        <thead>
                                            <tr class="main-heading">
                                                <th scope="col">Image</th>
                                                <th scope="col">Name</th>
                                                <th scope="col">Price</th>
                                                <th scope="col">Quantity</th>
                                                <th scope="col">Subtotal</th>
                                                <th scope="col">Remove</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>


                <!-- modal-form-start -->
                <div class="modal fade" id="modalContactForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title w-100 font-weight-bold">Your New Address</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>

                            <!-- modal-form--end -->
                            <!-- Modal for editing -->
                            <div class="modal fade" id="addModal" tabindex="-1" role="dialog"
                                aria-labelledby="editModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="editModalLabel">Add Address</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <!-- Form fields for editing -->
                                            <!-- You can pre-fill these fields with the data for editing -->
                                            <form action="/addAddress" method="post">
                                                <div class="form-group">
                                                    <label for="addName">Name</label>
                                                    <input type="text" name="Name" class="form-control" id="addName"
                                                        required>

                                                </div>
                                                <div class="form-group">
                                                    <label for="addName">Address Type</label>
                                                    <div class="custom_select">

                                                        <select name="AddressType" class="form-control
                                 select-active">
                                                            <option value="Home">HOME</option>
                                                            <option value="Work">WORK SPACE</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="addName">Address</label>
                                                    <input type="text" name="Address" class="form-control" required>
                                                </div>
                                                <div class="form-group">
                                                    <label for="addName">Landmark</label>
                                                    <input type="text" name="Landmark" class="form-control" required>
                                                </div>
                                                <div class="form-group"> <label for="addName">Phone</label>
                                                    <input type="text" name="Phone" class="form-control" required>

                                                </div>
                                                <div class="form-group">
                                                    <label for="addName">Email</label>
                                                    <input type="email" name="Email" class="form-control" required>

                                                </div>
                                                <div class="form-group">
                                                    <label for="addName">Pin Code</label>
                                                    <input type="text" name="Pin" class="form-control" required>
                                                </div>

                                                <!-- Add more form fields for editing (addressType, Address, Landmark, Pin, Phone, Email) -->
                                                <!-- ... -->

                                                <button type="submit" class="btn btn-primary">Save
                                                    Changes</button>
                                        </div>
                                        </form>
                                    </div>
                                </div>
                            </div>




                            <%- include('./userParsels/footer2.ejs') %>
                                <script>
                                    const password = document.getElementById("password")
                                    const confirmPassword = document.getElementById("confirmPassword")
                                    const oldPassword = document.getElementById('oldpassword')

                                    //show password
                                    function showPassword() {
                                        // let x = document.getElementById("password");
                                        if (password.type === "password") {
                                            password.type = "text";
                                        } else {
                                            password.type = "password";
                                        }
                                    }

                                    //show confirm password
                                    function showConfirmPassword() {
                                        //let x = document.getElementById("confirmPassword");
                                        if (confirmPassword.type === "password") {
                                            confirmPassword.type = "text";
                                        } else {
                                            confirmPassword.type = "password";
                                        }
                                    }

                                    function passwordValidation() {

                                        // Validate capital letters
                                        let upperCaseLetters = /[A-Z]/g;
                                        // Validate lowercase letters
                                        let lowerCaseLetters = /[a-z]/g;

                                        // Validate numbers
                                        let numbers = /[0-9]/g;
                                        if (

                                            password.value.match(lowerCaseLetters) && password.value.match(upperCaseLetters) && password.value.match(numbers) && password.value.length >= 8) {
                                            messagePasword.innerHTML = ""
                                            console.log("password")
                                            return true
                                        } else {
                                            messagePasword.innerHTML = "Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                                            return false
                                        }

                                        // }
                                    }


                                    // confirm password
                                    function confirmPasswordValidation() {
                                        //      $('#password, #confirm_password').on('keyup', function () {
                                        if ($('#password').val() == $('#confirmPassword').val()) {
                                            $('#confirmMessage').html('')
                                            console.log("confirm")
                                            return true
                                        } else
                                            $('#confirmMessage').html('Not Matching');
                                        return false
                                        //   });
                                    }

                                    function currentPasswordValidation() {

                                        // Validate capital letters
                                        let upperCaseLetters = /[A-Z]/g;
                                        // Validate lowercase letters
                                        let lowerCaseLetters = /[a-z]/g;

                                        // Validate numbers
                                        let numbers = /[0-9]/g;
                                        if (

                                            oldPassword.value.match(lowerCaseLetters) && oldPassword.value.match(upperCaseLetters) && password.value.match(numbers) && password.value.length >= 8) {
                                            oldpasswordError.innerHTML = ""
                                            return true
                                        } else {
                                            oldpasswordError.innerHTML = "Field Required"
                                            return false
                                        }
                                    }

                                    function validateForm() {
                                        console.log("validate form")
                                        if (passwordValidation() && confirmPasswordValidation()) {
                                            return true
                                        } else {
                                            return false
                                        }
                                    }

                                    async function changePassWord(event) {
                                        event.preventDefault()
                                        if (await !validateForm() || await !currentPasswordValidation()) {
                                            return false
                                        }
                                        // Get form data
                                        let formData = {
                                            oldPassword: oldPassword.value,
                                            newPassword: password.value,
                                            confirmPassword: confirmPassword.value
                                        };
                                        if (await formData.oldPassword === formData.newPassword) {
                                            await swal({
                                                icon: 'warning',
                                                text: "Current Password and New Password are same "
                                            })
                                            return false
                                        }
                                        console.log(formData)
                                        if (await passwordValidation() && await confirmPasswordValidation()) {
                                            const changePasswordResponse = await axios.put('/changePassword', formData)
                                            if (changePasswordResponse.data.status) {
                                                console.log("changePassword  ", changePasswordResponse.data)
                                                await swal({
                                                    icon: 'success',
                                                    text: "Password change Successfuly"
                                                })
                                                location.reload()
                                            } else {
                                                console.log("changePassword  ", changePasswordResponse.data)
                                                await swal({
                                                    icon: 'warning',
                                                    text: "Password change Failed; incorrect Password"
                                                })
                                                location.reload()
                                            }
                                        } else {
                                            return false
                                        }

                                    }

                                </script>

            </body>