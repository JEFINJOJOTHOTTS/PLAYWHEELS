<%- include('./userParsels/logHead.ejs') %>
<style>
    #message {
        display: none;
    }

    .valid:before {
        display: none;
    }

    .valid {
        display: none;
    }

    .invalid {
        font-size: small;
    }

    .invalid:before {
        font-size: small;
    }
</style>

    <body class="bgCol">

        <div>
            <h1 class="mt-5 ml-5"><a href="" class="text-decoration-none ">PLAYWHEELS</a></h1>
            <!-- Main Content -->
            <div
                class="container-fluid col-md-12 col-xs-12 col-sm-12 login_form  row main-content  text-center container-fluid">

                <div class="row pt-3">
                    <h2>FORGET PASSWORD</h2>
                </div>
                <div class="container">
                    <div class="row justify-content-center ">
                        <form control="" class="form-group   text-center" action="/resetPassword" method="post">

                            <input style="display: none;" value="<%=Email%>" name="Email"  >
                                                        <input style="display: none;" value="<%=randomString%>" name="randomString"  >
                            <div class="row">
                                <label for="exampleFormControl" style="color: rgb(34, 34, 34);"
                                    class="mb-0 mt-1">Password</label>
                                <input type="password" id="password" name="Password" class="form__input pt-2 mt-1 mb-1"
                                    placeholder="Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                    title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"
                                    required />
                                <div>
                                    <input type="checkbox" onclick="functionPassword()">Show Password
                                </div>
                                <div id="message">
                                    <span>
                                        <p id="messagePasword" class="invalid">Must contain at least one number and
                                            one
                                            uppercase and lowercase letter, and at least 8 or more characters</p>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <label for="exampleFormControl" style="color: rgb(34, 34, 34);"
                                    class="mb-0 mt-1">Confirm Password</label>
                                <input type="password" name="confirm_password" id="confirm_password"
                                    class="form__input pt-2 mt-1 mb-1" placeholder="Re-enter Password">
                                <div> <input type="checkbox" onclick="functionConfirmPassword()">Show Confirm
                                    Password
                                </div>
                                <div class="row ml-4 justify-content-center text-center">
                                    <p class="text-center">
                                        <span class="text-center" id='confirmMessage'></span>
                                    </p>
                                </div>
                            </div>

                            <div class="row justify-content-center">
                                <input type="submit" value="Submit" class="btn">
                            </div>

                        </form>
                    </div>

                    <div class="row">
                        <p class=""><a href="#">Back</a></p>
                    </div>

                </div>
            </div>
            <!-- Footer -->
        </div>
        <div class="p-5 m-4">.</div>
        <script>

            //show password
            function functionPassword() {
                let x = document.getElementById("password");
                if (x.type === "password") {
                    x.type = "text";
                } else {
                    x.type = "password";
                }
            }

            //show confirm password
            function functionConfirmPassword() {
                let x = document.getElementById("confirm_password");
                if (x.type === "password") {
                    x.type = "text";
                } else {
                    x.type = "password";
                }
            }

            //message Password
            let myInput = document.getElementById("password");

            // When the user clicks on the password field, show the message box
            myInput.onfocus = function () {
                document.getElementById("message").style.display = "block";
            }

            // When the user clicks outside of the password field, hide the message box
            myInput.onblur = function () {
                document.getElementById("message").style.display = "none";
            }

            // When the user starts to type something inside the password field
            myInput.onkeyup = function () {

                // Validate capital letters
                let upperCaseLetters = /[A-Z]/g;
                // Validate lowercase letters
                let lowerCaseLetters = /[a-z]/g;

                // Validate numbers
                let numbers = /[0-9]/g;
                if (myInput.value.match(lowerCaseLetters) && myInput.value.match(upperCaseLetters) && myInput.value.match(numbers) && myInput.value.length >= 8) {
                    messagePasword.classList.remove("invalid");
                    messagePasword.classList.add("valid");
                } else {
                    messagePasword.classList.remove("valid");
                    messagePasword.classList.add("invalid");
                }

            }



            // confirm password
            $('#password, #confirm_password').on('keyup', function () {
                if ($('#password').val() == $('#confirm_password').val()) {
                    $('#confirmMessage').html('')
                } else
                    $('#confirmMessage').html('Not Matching');
            });


        </script>
    </body>

    </html>